<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dance Choreography App</title>
    <link rel="stylesheet" href="style.css">
    <script type="module" src="index.js"></script>
</head>
<body>
    <div id="app">
        <header>
            <h1>Dance Choreography Editor</h1>
            <h2>40代からの自己表現</h2>
            <h2>Shall we dance?</h2>
            <p>一緒に踊りませんか？踊るって楽しいよ🎵</p>
        </header>
        <div id="glossary">
            <h2>Dance Glossary</h2>
            <div class="videoItemsContainer">
            <div class="videoItem">
                <button onclick="toggleDescription('houseDance')">House Dance</button>
                <p id="houseDance" class="description" style="display:none;">
                    House Danceは、1980年代にニューヨークのクラブシーンで生まれたダンススタイルで、ハウスミュージックに合わせて踊られます。
                </p>
            </div>
            <div class="videoItem">
                <button onclick="toggleDescription('hiphopDance')">Hiphop Dance</button>
                <p id="hiphopDance" class="description" style="display:none;">
                    Hiphop Danceは、ヒップホップは、ストリートダンスの中で最もポピュラーなものの一つ。
                    「アップ」と「ダウン」でリズムをとるのが特徴です。
                    「ダウン」では、オンカウントに合わせ膝を曲げ、身体を沈めるようにしてリズムをとっていきます。
                    対して「アップ」では、ダウンと反対のリズムで、エンカウントで膝を伸ばす形でリズムを取っていきます。
                </p>
            </div>
            <div class="videoItem">
                <button onclick="toggleDescription('popDance')">Pop Dance</button>
                <p id="popDance" class="description" style="display:none;">
                    Pop Danceは、1980年代にニューヨークのクラブシーンで生まれたダンススタイルで、ハウスミュージックに合わせて踊られます。
                </p>
            </div>
            <div class="videoItem">
                <button onclick="toggleDescription('Breaking')">Breaking Dance</button>
                <p id="Breaking" class="description" style="display:none;">
                    一般的に「ブレイクダンス」と呼ばれることが多いですが、BREAKING（ブレイキング）が正式な名前で、BREAKIN'と呼ぶ人も多いです。
逆立ちで止まったり、頭で回ったりとダイナミックな動きが特徴で、エントリー、フットワーク、パワームーブ、フリーズなどの動きがあります。
1970年代にニューヨークのサウスブロンクス地区のアフリカ系アメリカ人やラテンアメリカ人の若者たちによって発展しました。
                </p>
            </div>
            <div class="videoItem">
                <button onclick="toggleDescription('jazzDance')">Jazz Dance</button>
                <p id="jazzDance" class="description" style="display:none;">
                    ジャズダンスは、主に舞台、映画、ミュージカルなどで踊られるダンスのことを指します。
テーマパークダンサーが踊ってるのも、ほとんどジャズダンスです。
体のボディコントロールやポジショニング、ターンなどバレエが基礎であることが特徴です。また、ジャズダンスといっても、クラブジャズ、ストリートジャズ、ジャズファンク、スタイルジャズなど様々な種類があります。
1920年頃にアメリカで演奏されるようになった「ジャズに合わせて体を動かしていたもの」がジャズダンスの起源とされています。
                </p>
            </div>
            <div class="videoItem">
                <button onclick="toggleDescription('tapDance')">Tap Dance</button>
                <p id="tapDance" class="description" style="display:none;">
                    Tap Danceは,金属がついた靴で音を出しながら踊るダンスが特徴的です。
                    かなり特徴的なダンスのため、知っている方も多いでしょう。
                    黒人奴隷が楽器以外のものでもリズムやムードを表現する手段として足を踏み鳴らす行為をしていたところから、タップダンスが生まれたとされています。
                    現在では、リズムタップやミュージカルタップなど、さまざまな種類のタップダンスが生まれており、幅広く認知されています。
                    日本では、ビートたけしさんが映画内でタップダンスを踊っているところが話題になりました。
                </p>
            </div>
            <div class="videoItem">
                <button onclick="toggleDescription('contenpolaryDance')">contenpolary Dance</button>
                <p id="contenpolaryDance" class="description" style="display:none;">
                    contenpolary Danceは、1980年代前半にフランスで生まれたダンスです。
                    バレエなどとは異なり、音楽や踊りなどに制限のない特徴があります。
                    既存のダンスではないものを指すため、区別が難しく一目見ても理解に苦しむ作品が多いです。
                    日本では、芸能人の森山未來さんがコンテンポラリーダンスを踊っていると言われています。
                </p>
            </div>
        </div>
        <h2>Upload Your Dance Video</h2>
        <input type="file" id="videoFile" accept="video/*">
        <button onclick="uploadVideo()">Upload Video</button>
        <script src="index.js"></script>
        <main>
            <h2>ウォーミングアップステップ</h2>
            <div id="choreography-editor">
                <div id="choreography-editor">
                  <div class="videoItem">
                    <p>Step 1 バウンズ</p>
                    <video width="320" height="240" controls>
                        <source src="/1.MOV" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <ul class="tags">
                        <li>House Dance</li>
                        <li>Beginner</li>
                    </ul>
                </div>
                <div class="videoItem">
                    <p>Step 2 トゥーピポッド</p>
                    <video width="320" height="240" controls>
                        <source src="/2.MOV" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <ul class="tags">
                        <li>House Dance</li>
                        <li>Beginner</li>
                    </ul>
                </div>
                <div class="videoItem">
                    <p>step 3 ヒールピポッド</p>
                    <video width="320" height="240" controls>
                        <source src="/3.MOV" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <ul class="tags">
                        <li>House Dance</li>
                        <li>Beginner</li>
                    </ul>
                </div>
                <div class="videoItem">
                    <p>Step 4 サイドステップ</p>
                    <video width="320" height="240" controls>
                        <source src="/4.MOV" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <ul class="tags">
                        <li>House Dance</li>
                        <li>Beginner</li>
                    </ul>
                </div>
                <div class="videoItem">
                    <p>Step 5 ノック</p>
                    <video width="320" height="240" controls>
                        <source src="/5.MOV" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <ul class="tags">
                        <li>House Dance</li>
                        <li>Beginner</li>
                    </ul>
                </div>
                <div class="videoItem">
                    <p>Step 6 スライド</p>
                    <video width="320" height="240" controls>
                        <source src="/6.MOV" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                    <ul class="tags">
                        <li>House Dance</li>
                        <li>Beginner</li>
                    </ul>
                </div>
                <!-- <video id="videos"></video>
                <source sec="" -->
                <!-- <video controls width="250" src="/media/cc0-videos/flower.mp4" type="video/mp4"></video> -->
                <!-- <video controls width="250"> -->
                    <!-- <source id="videos" src="/media/cc0-videos/flower.mp4" type="video/mp4" /> -->
                  <!-- </video> -->
                  <div id="choreography-editor">
                    <div class="dance-move" draggable="true"><p></p> 
                      <video id="videoStep1" width="320" height="240" controls>
                        <source src="https://firebasestorage.googleapis.com/v0/b/dance-a41fe.appspot.com/o/videos%2F1.MOV?alt=media&token=487ef63e-9d71-434b-9d96-b9dbedbb0c3d" type="video/mp4">
                        Your browser does not support the video tag.
                      </video>
                    </div>
                    <div class="dance-move" draggable="true"><p></p>
                        <video id="videoStep2" width="320" height="240" controls>
                          <source src="https://firebasestorage.googleapis.com/v0/b/dance-a41fe.appspot.com/o/videos%2F2.MOV?alt=media&token=65ee2165-e038-4f12-9222-1df49a317f39" type="video/mp4">
                          Your browser does not support the video tag.
                        </video>
                      </div>
                      <div class="dance-move" draggable="true"><p></p>
                        <video id="videoStep3" width="320" height="240" controls>
                          <source src="https://firebasestorage.googleapis.com/v0/b/dance-a41fe.appspot.com/o/videos%2F3.MOV?alt=media&token=39079722-7b1d-4cfc-9d25-f2ebde02374a" type="video/mp4">
                          Your browser does not support the video tag.
                        </video>
                      </div>
                      <div class="dance-move" draggable="true"><p></p>
                        <video id="videoStep1" width="320" height="240" controls>
                          <source src="https://firebasestorage.googleapis.com/v0/b/dance-a41fe.appspot.com/o/videos%2F4.MOV?alt=media&token=52692c33-5d4c-4308-b980-d4575dc14f97" type="video/mp4">
                          Your browser does not support the video tag.
                        </video>
                      </div>
                  </div>
            </div>
          </div>
          <script type="module">
            import firebaseConfig from "./firebaseAPIkey.js";
            import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.9.0/firebase-app.js';
            import { getStorage,ref , uploadBytes ,getDownloadURL} from 'https://www.gstatic.com/firebasejs/10.9.0/firebase-storage.js';         
            // Firebaseアプリの初期化
            const app = initializeApp(firebaseConfig);
            // Storageサービスの取得
            const storage = getStorage(app);
            // uploadVideo関数の定義
            window.uploadVideo = async function() {
            const fileInput = document.getElementById('videoFile');
            if (fileInput.files.length === 0) {
            console.log('No file selected.');
            return;
             }
            const file = fileInput.files[0];
            const storageReference = storageRef(storage, 'videos/' + file.name);
            try {
            const uploadResult = await uploadBytes(storageReference, file);
            console.log('Upload successful', uploadResult);
            getDownloadURL(ref(storage, 'videos/'+ file.name))
            .then((url) => {
            // `url` is the download URL for 'images/stars.jpg'
            console.log(url);
            // Or inserted into an <img> element
            const img = document.getElementById('videos');
            img.setAttribute('src', url);
            })
              //   .catch((error) => {
             // Handle any errors
            } catch (error) {
            console.error('Upload failed:', error);
    }
  }
  getDownloadURL(ref(storage, 'videos/1.MOV'))
  .then((url) => {
    // `url` is the download URL for 'images/stars.jpg'
console.log(url);
        // Or inserted into an <img> element
    const img = document.getElementById('videos');
    img.setAttribute('src', url);
  })
  .catch((error) => {
    // Handle any errors
  });
            function complete() {
            console.log('Upload successful');
            // ダウンロードURLの取得
            getDownloadURL(storageRef).then((url) => {
            console.log('Download URL:', url);
            // ここで displayUploadedVideo(url); を呼び出す
             });
}
// アップロードされた動画を表示する関数
function displayUploadedVideo(url) {
    // 要素を作成
    const videoItem = document.createElement('div');
    videoItem.classList.add('videoItem');
    videoItem.innerHTML = `
        <div class="dance-move" draggable="true">
            <p>アップロードした動画</p>
            <video width="320" height="240" controls>
                <source src="${url}" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>
    `;
    // 指定したコンテナ（例えばidが'videosContainer'のdiv）に動画を追加
    document.getElementById('videosContainer').appendChild(videoItem);
}
          </script>
      <script type="module" src="index.js"></script>
</body>
<footer>
    <h2>作者プロフィール</h2>
    <p>名前: 鈴木円香</p>
    <img src="./sam.jpeg" alt="作者の写真" class="footer-photo">
    <p>ダンス歴: 10年</p>
    <p>高校1年の時に、衝撃的にハウスダンスと出会いスタジオに通い始めチームを結成</p>
    <p>その半年後にダンス大会で特別賞受賞</p>
    <p>SAMさんが大好き❤️</p>
</footer>
</html>
